### function åç¨±

`get_order_history`

---

### function ç”¨é€”

æŸ¥è©¢å¸³æˆ¶åœ¨æŒ‡å®šæ™‚é–“å€é–“å…§çš„æ­·å²æˆäº¤ç´€éŒ„ï¼ˆå·²æˆäº¤çš„äº¤æ˜“ï¼‰ã€‚ 
å¯ä¾æ™‚é–“ç¯„åœã€å•†å“ã€è¨‚å–® ID æˆ–éƒ¨ä½ ID é€²è¡Œéæ¿¾ã€‚

---

### function åƒæ•¸

| åƒæ•¸åç¨± | å‹åˆ¥ | å‚™è¨»èªªæ˜ |
|----------|------|----------|
| params   | dict | å­—å…¸å…§å®¹å¦‚ä¸‹æ–¹æ¬„ä½èªªæ˜ |

| dict æ¬„ä½åç¨± | å‹åˆ¥          | å¿…å¡« | èªªæ˜                                                       |
|-------------|---------------|------|------------------------------------------------------------|
| `symbol`    | str           | âŒ   | æŒ‡å®šæŸ¥è©¢çš„å•†å“ï¼ˆä½¿ç”¨ `group` æ¬„ä½éæ¿¾ï¼‰                    |
| `from`      | datetime/str  | âŒ   | èµ·å§‹æ™‚é–“ï¼Œé è¨­ç‚º `2000-01-01`                              |
| `to`        | datetime/str  | âŒ   | çµæŸæ™‚é–“ï¼Œé è¨­ç‚º `datetime.now()`                          |
| `ticket`    | int           | âŒ   | æŒ‡å®šè¨‚å–®çš„æˆäº¤ç´€éŒ„ï¼ˆå¯æ­é… from/toï¼‰                       |
| `position`  | int           | âŒ   | æŒ‡å®šéƒ¨ä½çš„æˆäº¤ç´€éŒ„                                          |

---

### function å›å‚³å…§å®¹

| åç¨±   | å‹åˆ¥           | å‚™è¨»èªªæ˜                               |
|--------|---------------|----------------------------------------|
| result |  `list[dict]` | å›å‚³æ‰€æœ‰ç¬¦åˆæ¢ä»¶çš„æ­·å²æˆäº¤ç´€éŒ„ï¼Œæ¯ç­†ç‚ºä¸€ç­†æˆäº¤ç´€éŒ„ï¼Œè‹¥ç„¡è³‡æ–™å‰‡å›å‚³ç©ºé™£åˆ— `[]`ï¼Œå­—å…¸å…§å®¹å¦‚ä¸‹æ–¹æ¬„ä½èªªæ˜ |

| æ¬„ä½åç¨±       | å‹åˆ¥      | èªªæ˜                                 |
|----------------|-----------|--------------------------------------|
| `ticket`        | int       | æˆäº¤ç´€éŒ„çš„å”¯ä¸€ ID                    |
| `order`         | int       | æ‰€å±¬è¨‚å–®ç·¨è™Ÿ                          |
| `position_id`   | int       | å°æ‡‰çš„éƒ¨ä½ ID                        |
| `symbol`        | str       | å•†å“ä»£ç¢¼                             |
| `type`          | int       | æˆäº¤æ–¹å‘ï¼ˆè²·/è³£ï¼‰                    |
| `entry`         | int       | æˆäº¤é¡å‹ï¼ˆå»ºå€‰ã€å¹³å€‰ã€èª¿æ•´ç­‰ï¼‰      |
| `reason`        | int       | æˆäº¤åŸå› ï¼ˆæ‰‹å‹•ã€è‡ªå‹•ã€åˆ°æœŸç­‰ï¼‰      |
| `volume`        | float     | æˆäº¤æ‰‹æ•¸                             |
| `price`         | float     | æˆäº¤åƒ¹æ ¼                             |
| `commission`    | float     | æ‰‹çºŒè²»                               |
| `swap`          | float     | åº«å­˜è²»                               |
| `fee`           | float     | å…¶ä»–è²»ç”¨                             |
| `profit`        | float     | è©²ç­†æˆäº¤çš„ç›ˆè™§                       |
| `comment`       | str       | å‚™è¨»                                 |
| `external_id`   | str       | å¤–éƒ¨ç³»çµ±åƒç…§ ID                      |
| `time`          | datetime  | æˆäº¤æ™‚é–“ï¼ˆè½‰æ›ç‚º `datetime`ï¼‰        |
| `time_msc`      | int       | æˆäº¤æ™‚é–“ï¼ˆæ¯«ç§’ timestampï¼‰           |

å›å‚³æ ¼å¼å¦‚ä¸‹ï¼š

```python
[
  {
    "ticket": 123456789,
    "order": 987654321,
    "position_id": 111222,
    "symbol": "USDJPY.sml",
    "type": 0,
    "entry": 1,
    "reason": 0,
    "volume": 0.1,
    "price": 157.350,
    "commission": -0.8,
    "swap": 0.0,
    "fee": 0.0,
    "profit": 20.15,
    "comment": "é–‹å€‰",
    "external_id": "",
    "time": "2025-06-20T15:30:00",
    "time_msc": 1718868600000
  }
]
```

---

### ğŸ’¡ ç¯„ä¾‹ç¨‹å¼ç¢¼

```python
mas_client = MASClient()

from datetime import datetime, timedelta

params = {
    "symbol": "USDJPY.sml",
    "from": datetime.now() - timedelta(days=7),
    "to": datetime.now()
}

deals = mas_client.get_order_history(params)

for d in deals:
    print(f"{d['symbol']} | {d['price']} @ {d['volume']}æ‰‹ | ç›ˆè™§: {d['profit']}")

```

---

### MT5 function

function åç¨±ï¼š`mt5.history_deals_get()`
function ç”¨é€”ï¼šæŸ¥è©¢æŒ‡å®šæ™‚é–“å€é–“å…§çš„æ­·å²æˆäº¤ç´€éŒ„ï¼ˆDealï¼‰ï¼Œå¯é€éåƒæ•¸ç¯©é¸æŒ‡å®šå•†å“ã€è¨‚å–®æˆ–éƒ¨ä½ã€‚

ä»¥ä¸‹ç‚ºæ‰€æœ‰å¯å‚³å…¥çš„å‘½ååƒæ•¸ï¼ˆçš†ç‚ºå¯é¸ï¼‰ï¼š
| åƒæ•¸åç¨± | å‹åˆ¥ | èªªæ˜ |
|----------|------|------|
| date_from | datetime | æŸ¥è©¢èµ·å§‹æ™‚é–“ã€‚ |
| date_to   | datetime | æŸ¥è©¢çµæŸæ™‚é–“ã€‚ |
| group     | str      | å•†å“ç¾¤çµ„éæ¿¾æ¢ä»¶ã€‚å¯å›å‚³ç¬¦åˆç¾¤çµ„æ¢ä»¶çš„å•†å“æˆäº¤ç´€éŒ„ï¼ˆä¾‹å¦‚ `"USD*"` è¡¨ç¤ºæ‰€æœ‰ç¾å…ƒå•†å“ï¼‰ã€‚ |
| ticket    | int      | æŒ‡å®šè¨‚å–®çš„ ticket ç·¨è™Ÿï¼Œå°‡å›å‚³å°æ‡‰çš„æˆäº¤ç´€éŒ„ã€‚ |
| position  | int      | æŒ‡å®šéƒ¨ä½çš„ ticket ç·¨è™Ÿï¼Œå°‡å›å‚³å°æ‡‰çš„æˆäº¤ç´€éŒ„ã€‚ |


å›å‚³å…§å®¹:
| å‹åˆ¥ | èªªæ˜                         |
|------|------------------------------|
| `Deal ` çµæ§‹ç‰©ä»¶ | æ¬„ä½å…§å®¹æ•´åˆè‡ª`ENUM_DEAL_PROPERTY_INTEGER` , `ENUM_DEAL_PROPERTY_DOUBLE` ,  `ENUM_DEAL_PROPERTY_STRING` |

ENUM_DEAL_PROPERTY_INTEGER:
| æ¬„ä½åç¨±            | é¡å‹     | èªªæ˜                                                           |
|---------------------|----------|----------------------------------------------------------------|
| ticket              | int      | æˆäº¤ç´€éŒ„ç·¨è™Ÿã€‚æ¯ç­†æˆäº¤ç´€éŒ„æœƒåˆ†é…ä¸€å€‹å”¯ä¸€çš„ ticketã€‚             |
| order               | int      | å°æ‡‰çš„è¨‚å–®ç·¨è™Ÿã€‚                                               |
| time                | datetime | æˆäº¤æ™‚é–“ã€‚                                                     |
| time_msc            | int      | æˆäº¤æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰ã€‚                                             |
| type                | int      | æˆäº¤é¡å‹ï¼ˆ0=è²·å…¥ï¼Œ1=è³£å‡ºï¼Œ2=å¹³å€‰ç­‰ï¼‰ã€‚                         |
| entry               | int      | æˆäº¤æ–¹å‘ï¼ˆ0=é€²å ´ï¼Œ1=å‡ºå ´ï¼‰ã€‚                                   |
| position_id         | int      | å°æ‡‰çš„éƒ¨ä½ç·¨è™Ÿã€‚                                               |
| reason              | int      | æˆäº¤åŸå› ï¼ˆ0=å®¢æˆ¶æ‰‹å‹•ï¼Œ1=ç§»å‹•ç«¯ï¼Œ2=ç¶²é ç«¯ï¼Œ3=EAï¼‰ã€‚             |

ENUM_DEAL_PROPERTY_DOUBLE:
| æ¬„ä½åç¨±           | é¡å‹  | èªªæ˜                     |
|--------------------|-------|--------------------------|
| volume             | float | æˆäº¤æ•¸é‡ï¼ˆæ‰‹æ•¸ï¼‰ã€‚       |
| price              | float | æˆäº¤åƒ¹æ ¼ã€‚               |
| commission         | float | æ‰‹çºŒè²»ã€‚                 |
| swap               | float | æ‰æœŸè²»ç”¨ã€‚               |
| profit             | float | æˆäº¤ç›ˆè™§ã€‚               |
| fee                | float | é¡å¤–è²»ç”¨ã€‚               |

ENUM_DEAL_PROPERTY_STRING:
| æ¬„ä½åç¨±           | é¡å‹  | èªªæ˜                     |
|--------------------|-------|--------------------------|
| symbol             | str   | å•†å“ä»£ç¢¼ã€‚               |
| comment            | str   | æˆäº¤è¨»è§£ã€‚               |
| external_id        | str   | å¤–éƒ¨äº¤æ˜“ç³»çµ±çš„æˆäº¤è­˜åˆ¥ç¢¼ã€‚|

å®˜æ–¹åƒè€ƒé€£çµï¼š 
https://www.mql5.com/en/docs/python_metatrader5/mt5historydealsget_py